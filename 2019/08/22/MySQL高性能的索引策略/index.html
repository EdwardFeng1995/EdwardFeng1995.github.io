<!DOCTYPE html>
<script src="/js/src/click.js"></script>
<html lang="zh">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta name="baidu-site-verification" content="N3g7rXsOdw">
<meta name="baidu-site-verification" content="KOiSXH19Wh">
<meta charset="utf-8">
<title>MySQL高性能的索引策略 - 冯泡泡的博客</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta name="description" content="高性能的索引策略1、索引的优点索引的优点可以总结如下：  索引大大减少了服务器需要扫描的数据量。 索引可以帮助服务器避免排序和临时表。 索引可以将随机I/O变为顺序I/O。">
<meta name="keywords" content="MySQL">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL高性能的索引策略">
<meta property="og:url" content="https://edwardfeng1995.github.io/2019/08/22/MySQL高性能的索引策略/index.html">
<meta property="og:site_name" content="冯泡泡的博客">
<meta property="og:description" content="高性能的索引策略1、索引的优点索引的优点可以总结如下：  索引大大减少了服务器需要扫描的数据量。 索引可以帮助服务器避免排序和临时表。 索引可以将随机I/O变为顺序I/O。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://edwardfeng1995.github.io/images/数据库.jpeg">
<meta property="og:updated_time" content="2019-08-24T07:58:53.764Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MySQL高性能的索引策略">
<meta name="twitter:description" content="高性能的索引策略1、索引的优点索引的优点可以总结如下：  索引大大减少了服务器需要扫描的数据量。 索引可以帮助服务器避免排序和临时表。 索引可以将随机I/O变为顺序I/O。">
<meta name="twitter:image" content="https://edwardfeng1995.github.io/images/数据库.jpeg">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
<script>
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?1aef5bc8ba3740f8fc4e445dfe48d734";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();
</script>

    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    


<link rel="stylesheet" href="/css/style.css">

</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/冯泡泡.png" alt="MySQL高性能的索引策略" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">Home</a>
                
                <a class="navbar-item" href="/archives">Archives</a>
                
                <a class="navbar-item" href="/categories">Categories</a>
                
                <a class="navbar-item" href="/tags">Tags</a>
                
                <a class="navbar-item" href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                <a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;">
                    <i class="fas fa-list-ul"></i>
                </a>
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>

    

    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-6-tablet is-6-desktop is-9-widescreen has-order-2 column-main"><div class="card">
    
    <div class="card-image">
        <span class="image is-7by1">
            <img class="thumbnail" src="/images/数据库.jpeg" alt="MySQL高性能的索引策略">
        </span>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-08-22T08:23:00.000Z">2019-08-22</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/数据库/">数据库</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    27 分钟 读完 (大约 4069 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                MySQL高性能的索引策略
            
        </h1>
        <div class="content">
            <h2 id="高性能的索引策略"><a href="#高性能的索引策略" class="headerlink" title="高性能的索引策略"></a><strong>高性能的索引策略</strong></h2><h3 id="1、索引的优点"><a href="#1、索引的优点" class="headerlink" title="1、索引的优点"></a><strong>1、索引的优点</strong></h3><p>索引的优点可以总结如下：</p>
<ul>
<li>索引大大减少了服务器需要扫描的数据量。</li>
<li>索引可以帮助服务器避免排序和临时表。</li>
<li>索引可以将随机I/O变为顺序I/O。</li>
</ul>
<a id="more"></a>
<p><strong>索引是最好的解决方案吗？</strong></p>
<ul>
<li>对于非常小的表，大部分情况下简单的全表扫描更高效。</li>
<li>对于中到大型的表，索引就非常有效。</li>
<li>对于特大型表，可以使用区分技术。</li>
<li>如果表的数据量特别多，可以建立一个元数据信息表，用来查询需要用到的某些特性。</li>
</ul>
<h3 id="2、高性能的索引策略"><a href="#2、高性能的索引策略" class="headerlink" title="2、高性能的索引策略"></a><strong>2、高性能的索引策略</strong></h3><h4 id="2-1-独立的列"><a href="#2-1-独立的列" class="headerlink" title="2.1 独立的列"></a><strong>2.1 独立的列</strong></h4><p>如果查询中的列不是独立的，则MySQL就不会使用索引。<strong>“独立的列”是指索引列不能是表达式的一部分，也不能是函数的参数。</strong></p>
<p>例如，下面这个查询无法使用actor_id列的索引</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT actor_id FROM actor WHERE actor_id + 1 = 5</span><br></pre></td></tr></table></figure>
<p>另一个常见的错误如下：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT ... WHERE TO_DAYS(CURRENT_DATE) - TO_DAYS(date_col) &lt;= 10 ;</span><br></pre></td></tr></table></figure>
<h4 id="2-2-前缀索引和索引选择性"><a href="#2-2-前缀索引和索引选择性" class="headerlink" title="2.2 前缀索引和索引选择性"></a><strong>2.2 前缀索引和索引选择性</strong></h4><p>有时候需要索引很长的字符列，这会让索引变得大且慢。<strong>通常可以索引开始的部分字符，这样可以大大节约索引空间，从而提高索引效率。但是会降低索引的选择性。</strong></p>
<p><strong>索引的选择性：</strong>不重复的索引值（也称基数）/数据表的记录总数（#T）。</p>
<p><strong>索引的选择性越高则查询效率越高，因为选择性高的索引可以让MySQL在查找时过滤掉更多的行。</strong>唯一索引的选择性是1，这是最好的索引选择性，性能也是最好的。</p>
<p>前缀应该足够长，，以使得前缀索引的选择性接近于索引整个列。即<strong>前缀的“基数”应该接近于完整列的“基数”。</strong></p>
<p>下面是一个示例，在表sakila.city_demo中存了大量的城市。</p>
<p>首先，从表中找到最常见的城市列表：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(*) AS cnt, city</span><br><span class="line">FROM sakila.city_demo GROUP BY city ORDER BY cnt DESC LIMIT 10;</span><br><span class="line"></span><br><span class="line">+-----+---------------------+</span><br><span class="line">| cnt | city                |</span><br><span class="line">+-----+---------------------+</span><br><span class="line">|  63 | London              |</span><br><span class="line">|  55 | guas Lindas de Gois |</span><br><span class="line">|  49 | Naju                |</span><br><span class="line">|  49 | Alvorada            |</span><br><span class="line">|  48 | Bergamo             |</span><br><span class="line">|  48 | Nakhon Sawan        |</span><br><span class="line">|  47 | Rizhao              |</span><br><span class="line">|  46 | Pathankot           |</span><br><span class="line">|  46 | Soshanguve          |</span><br><span class="line">|  46 | Monywa              |</span><br><span class="line">+-----+---------------------+</span><br></pre></td></tr></table></figure>
<p>然后查找到频繁出现的城市前缀，经过试验，前缀长度为7时，前缀的选择性接近完整列的选择性。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(*) AS cnt, LEFT(city,7) AS pref</span><br><span class="line">FROM sakila.city_demo GROUP BY pref ORDER BY cnt DESC LIMIT 10;</span><br><span class="line"></span><br><span class="line">+-----+---------+</span><br><span class="line">| cnt | pref    |</span><br><span class="line">+-----+---------+</span><br><span class="line">|  64 | San Fel |</span><br><span class="line">|  63 | London  |</span><br><span class="line">|  58 | Valle d |</span><br><span class="line">|  55 | guas Li |</span><br><span class="line">|  51 | Santiag |</span><br><span class="line">|  49 | Naju    |</span><br><span class="line">|  49 | Alvorad |</span><br><span class="line">|  48 | Nakhon  |</span><br><span class="line">|  48 | Bergamo |</span><br><span class="line">|  47 | Rizhao  |</span><br><span class="line">+-----+---------+</span><br></pre></td></tr></table></figure>
<p>下面显示如何计算完整列的选择性：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(DISTINCT city)/COUNT(*) FROM sakila.city_demo;</span><br><span class="line"></span><br><span class="line">+-------------------------------+</span><br><span class="line">| COUNT(DISTINCT city)/COUNT(*) |</span><br><span class="line">+-------------------------------+</span><br><span class="line">|                        0.0312 |</span><br><span class="line">+-------------------------------+</span><br></pre></td></tr></table></figure>
<p>下面计算不同前缀长度的选择性：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT COUNT(DISTINCT LEFT(city,3))/COUNT(*) AS sel3,</span><br><span class="line">    -&gt; COUNT(DISTINCT LEFT(city,4))/COUNT(*) AS sel4,</span><br><span class="line">    -&gt; COUNT(DISTINCT LEFT(city,5))/COUNT(*) AS sel5,</span><br><span class="line">    -&gt; COUNT(DISTINCT LEFT(city,6))/COUNT(*) AS sel6,</span><br><span class="line">    -&gt; COUNT(DISTINCT LEFT(city,7))/COUNT(*) AS sel7</span><br><span class="line">    -&gt; FROM sakila.city_demo;</span><br><span class="line">+--------+--------+--------+--------+--------+</span><br><span class="line">| sel3   | sel4   | sel5   | sel6   | sel7   |</span><br><span class="line">+--------+--------+--------+--------+--------+</span><br><span class="line">| 0.0239 | 0.0293 | 0.0305 | 0.0309 | 0.0310 |</span><br><span class="line">+--------+--------+--------+--------+--------+</span><br></pre></td></tr></table></figure>
<p>查询显示当前缀长度到达7的时候，再增加前缀长度，选择性提升的幅度已经很小了。</p>
<p>下面比较无索引、前缀长度为3的索引、前缀长度为7的索引的查询性能：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 无索引，查询</span><br><span class="line">EXPLAIN SELECT * FROM sakila.city_demo WHERE city=&apos;Sanaa&apos;;</span><br><span class="line"># 创建前缀长度为3的索引</span><br><span class="line">ALTER TABLE sakila.city_demo ADD KEY (city(3));</span><br><span class="line">EXPLAIN SELECT * FROM sakila.city_demo WHERE city=&apos;Sanaa&apos;;</span><br><span class="line"># 删除索引</span><br><span class="line">ALTER TABLE sakila.city_demo DROP INDEX city;</span><br><span class="line"># 创建前缀长度为7的索引</span><br><span class="line">ALTER TABLE sakila.city_demo ADD KEY (city(7));</span><br><span class="line">EXPLAIN SELECT * FROM sakila.city_demo WHERE city=&apos;Sanaa&apos;;</span><br></pre></td></tr></table></figure>
<p>结果如下图所示：</p>
<p><img src="/images/高性能的索引策略/1.png" alt="无索引查询"></p>
<p><img src="/images/高性能的索引策略/2.png" alt="索引前缀为3的查询"></p>
<p><img src="/images/高性能的索引策略/3.png" alt="前缀长度为7的索引查询"></p>
<p>对比可以看出，无索引需要检索19256行，前缀长度为3的索引需要检索441行，前缀长度为7的索引只需要检索46行，而city=Sanaa的行只有46行，合适长度的前缀索引检索效率很高。</p>
<h4 id="2-3-多列索引"><a href="#2-3-多列索引" class="headerlink" title="2.3 多列索引"></a><strong>2.3 多列索引</strong></h4><p><strong>在多个列上建立独立的单列索引大部分情况下并不能提高MySQL的查询性能。</strong></p>
<p>在MySQL 5.0和更新的版本中，查询能够同时使用多个单列索引进行扫描，并将结果进行合并。这种算法有三个变种：OR条件的联合（union），AND条件的相交（intersection），组合前两种情况的联合及相交。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; EXPLAIN SELECT film_id, actor_id FROM sakila.film_actor </span><br><span class="line">WHERE actor_id = 1 OR film_id = 1\G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">           id: 1</span><br><span class="line">  select_type: SIMPLE</span><br><span class="line">        table: film_actor</span><br><span class="line">   partitions: NULL</span><br><span class="line">         type: index_merge</span><br><span class="line">possible_keys: PRIMARY,idx_fk_film_id</span><br><span class="line">          key: PRIMARY,idx_fk_film_id</span><br><span class="line">      key_len: 2,2</span><br><span class="line">          ref: NULL</span><br><span class="line">         rows: 29</span><br><span class="line">     filtered: 100.00</span><br><span class="line">        Extra: Using union(PRIMARY,idx_fk_film_id); Using where</span><br></pre></td></tr></table></figure>
<p>索引合并策略有时候是一种优化的结果，但实际上更多时候说明了表上的索引建得很糟糕。</p>
<p>如果在EXPLAIN中看到有索引合并，应该好好检查以下查询和表的结构，看是不是已经是最优的。也可以通过参数optimizer_switch来关闭索引合并功能。也可以使用IGNORE INDEX提示让优化器忽略掉某些索引。</p>
<h4 id="2-4-选择合适的索引列顺序"><a href="#2-4-选择合适的索引列顺序" class="headerlink" title="2.4 选择合适的索引列顺序"></a><strong>2.4 选择合适的索引列顺序</strong></h4><p>在一个多列B-Tree索引中，索引列的顺序意味着索引首先按照最左列进行排序，其次是第二列。</p>
<p>一个经验法则：<strong>将选择性最高的列放到索引最前列。</strong></p>
<p>当不需要考虑排序和分组时，将选择性最高的列放在前面通常是很好的。</p>
<p>经验法则和推论在多数情况是有用的，但要注意不要假设平均情况下的性能也能代表特殊情况下的性能，特殊情况可能会摧毁整个应用的性能。</p>
<h4 id="2-5-聚簇索引"><a href="#2-5-聚簇索引" class="headerlink" title="2.5 聚簇索引"></a><strong>2.5 聚簇索引</strong></h4><p>聚簇索引并不是一种单独的索引类型，而是一种数据存储方式。具体的细节依赖于其实现方式，<strong>但InnoDB的聚簇索引实际上在同一个结构中保存了B-Tree索引和数据行。</strong></p>
<p><strong>当表有聚簇索引时，它的数据行实际上存放在索引的叶子页中。</strong>一个表只能有一个聚簇索引。</p>
<p>下图展示了聚簇索引中的记录是如何存放的。</p>
<p><img src="/images/高性能的索引策略/4.png" alt=" "></p>
<p>InnoDB将通过主键聚集数据，如果没有定义主键，InnoDB会选择一个唯一的非空索引代替。如果没有这样的索引，InnoDB会隐式定义一个主键来作为聚簇索引。</p>
<p>聚集的数据有一些重要的优点：</p>
<ul>
<li>可以把相关数据保存在一起。</li>
<li>数据访问更快。</li>
<li>使用覆盖索引扫描的查询可以直接使用页节点中的主键值。</li>
</ul>
<p>聚簇索引也有一些缺点：</p>
<ul>
<li>聚簇数据最大限度地提高了I/O密集型应用的性能，但如果数据全部都放在内存中，则访问的顺序就没那么重要了，聚簇索引也就没什么优势了。</li>
<li>插入速度严重依赖于插入顺序。</li>
<li>更新聚簇索引列的代价很高，因为会强制InnoDB将每个被更新的行移动到新的位置。</li>
<li>当行的主键值要求必须将这一行插入到某个已满的页中时，存储引擎会将该页分裂成两个页面来容纳该行，这就是一次页分裂操作。页分裂会导致表占用更多的磁盘空间。</li>
<li>聚簇索引可能会导致全表扫描变得慢，尤其是行比较稀疏，或者由于页分裂导致数据存储不连续的时候。</li>
<li>二级索引（非聚簇索引）可能比想象的要更大，因为在二级索引的叶子节点包含了引用行的主键列。</li>
<li>二级索引访问需要两次索引查找，而不是一次。</li>
</ul>
<h5 id="InnoDB和MyISAM的数据分部对比"><a href="#InnoDB和MyISAM的数据分部对比" class="headerlink" title="InnoDB和MyISAM的数据分部对比"></a><strong>InnoDB和MyISAM的数据分部对比</strong></h5><p><strong>MyISAM的数据分布：</strong></p>
<ul>
<li><p>MyISAM按照数据插入的顺序存储在磁盘上。</p>
</li>
<li><p><strong>MyISAM中主键索引和其他索引在结构上没有什么不同。主键索引就是一个名为PRIMARY的唯一非空索引。</strong></p>
</li>
</ul>
<p><strong>InnoDB的数据分布：</strong></p>
<ul>
<li><p>下图展示了InnoDB的存储方式：</p>
<p><img src="/images/高性能的索引策略/5.png" alt=" "></p>
</li>
<li><p><strong>InnoDB二级索引的叶子节点中存储的不是“行指针”，而是主键值，并以此作为指向行的“指针‘</strong>。好处是，InnoDB在移动行时无须更新二级索引中的这个”指针“。</p>
</li>
</ul>
<p>下图可以清楚地看出二者的区别：</p>
<p><img src="/images/高性能的索引策略/6.png" width="600" height="400" div align="center"></p>
<h5 id="在InnoDB表中按主键顺序插入行"><a href="#在InnoDB表中按主键顺序插入行" class="headerlink" title="在InnoDB表中按主键顺序插入行"></a><strong>在InnoDB表中按主键顺序插入行</strong></h5><p>最好避免随机的（不连续且值的分布范围非常大）聚簇索引，特别是对于I/O密集型的应用。</p>
<p>下图展示了顺序和随机的不同：</p>
<p><img src="/images/高性能的索引策略/7.png" width="600" height="300" div align="center"></p>
<p><img src="/images/高性能的索引策略/8.png" width="600" height="400" div align="center"></p>
<p>明显看出，对于插入无序的值，新行的主键值不一定比之前插入的大，所以InnoDB无法简单地总是把新行插入到索引的最后。这会有很多缺点：</p>
<p><img src="/images/高性能的索引策略/9.png" alt></p>
<h4 id="2-6-覆盖索引"><a href="#2-6-覆盖索引" class="headerlink" title="2.6 覆盖索引"></a><strong>2.6 覆盖索引</strong></h4><p><strong>如果一个索引包含（或者说覆盖）所有需要查询的字段的值，我们就称之为”覆盖索引“。</strong>这样查询只需要扫描索引而无须回表。有以下好处：</p>
<ul>
<li>索引条目通常远小于数据行大小，所以如果只需要读取索引，那MySQL就会极大地减少数据访问量。此外，索引比数据更小，更容易全部放入内存。</li>
<li>索引是按照列值顺序存储的，所以对于I/O密集型的范围查询会比随机从磁盘读取每一行数据的I/O要少得多。</li>
<li>一些存储引擎如MyISAM在内存中只缓存索引，数据则依赖于操作系统来缓存，因此要访问数据需要一次系统调用。这可能会导致严重的性能问题，但是对于覆盖索引，数据全部在内存中，可以避免这种情况。</li>
<li>由于InnoDB的聚簇索引，覆盖索引对InnoDB表特别有用。InnoDB的二级索引在叶子节点中保存了行的主键值，所以如果二级主键能够覆盖查询，可以避免对主键索引的二次查询。</li>
</ul>
<p>不是所有类型的索引都可以成为覆盖索引。覆盖索引必须要存储索引列的值，而哈希索引、空间索引和全文索引等都不存储索引列的值，所以MySQL只能使用B-Tree索引做覆盖索引。</p>
<p>当发起一个被索引覆盖的查询时，在EXPLAIN的Extra列可以看到”Using index“的信息。</p>
<p><strong>在大多数存储引擎中，覆盖索引只能覆盖那些只访问索引中部分列的查询。</strong>InnoDB的二级索引叶子节点都包含了主键的值，这意味着InnoDB的二级索引可以有效地利用这些”额外“的主键来覆盖查询。</p>
<h4 id="2-7-使用索引扫描来做排序"><a href="#2-7-使用索引扫描来做排序" class="headerlink" title="2.7 使用索引扫描来做排序"></a><strong>2.7 使用索引扫描来做排序</strong></h4><p>MySQL有两种方式可以生成有序的结果：通过排序操作；或者按索引顺序扫描。</p>
<p>只有当索引的列顺序和ORDER BY子句的顺序完全一致，并且所有列的排序方向（倒序或正序）都一样时，MySQL才能够使用索引来对结果做排序。如果查询需要关联多张表，则只有当ORDER BY子句引用的字段全部为第一个表时，才能使用索引做排序。ORDER BY子句和查找型查询的限制是一样的：需要满足索引的最左前缀的要求；否则，MySQL都需要执行排序操作，而无法利用索引排序。</p>
<p>有一种情况下ORDER BY子句可以不满足索引的最左前缀的要求，就是前导列为常量的时候。</p>
<h4 id="2-8-压缩（前缀压缩）索引"><a href="#2-8-压缩（前缀压缩）索引" class="headerlink" title="2.8 压缩（前缀压缩）索引"></a><strong>2.8 压缩（前缀压缩）索引</strong></h4><p><strong>MyISAM使用前缀压缩来减少索引的大小，从而让更多的索引可以放入内存中，这在某些情况下能极大地提高性能。默认只压缩字符串，但通过参数设置也可以对整数做压缩。</strong></p>
<p><strong>MyISAM压缩每个索引块的方法是，先完成保存索引块中的第一个值，然后将其他值和第一个值进行比较得到相同前缀的字节数和剩余的不同后缀部分，把这不同部分存储起来即可。</strong>例如，索引块中的第一个值是“perform”，第二个值是“performance”，那么第二个值的前缀压缩后存储的是类似于“7,ance”这样的形式。MyISAM对行指针也采用类似的前缀压缩方式。</p>
<p>压缩索引块可以使用更少的空间，代价是某些操作可能更慢。因为每个值的压缩前缀都依赖于前面的值。所以MyISAM查找时无法在索引块中使用二分查找而只能从头开始扫描。正序的扫描速度还不错，但是如果是倒序扫描 —— 例如ORDER BY DESC —— 就不是很好了。所有在块中查找某一行的操作平均都需要扫描半个索引块。</p>
<p>可以在CREATE TABLE语句中指定PACK_KEYS参数来控制索引压缩的方式。</p>
<h4 id="2-9-冗余和重复索引"><a href="#2-9-冗余和重复索引" class="headerlink" title="2.9 冗余和重复索引"></a><strong>2.9 冗余和重复索引</strong></h4><p>MySQL允许在相同列上创建多个索引，无论是有意的还是无意的。MySQL需要单独维护重复的索引，并且优化器在优化查询的时候也需要逐个地进行考虑，这会影响性能。</p>
<p><strong>重复索引是指在相同的列上按照相同的顺序创建的相同类型的索引。</strong>要避免这么做。</p>
<p>冗余索引和重复索引有一些不同。（A，B），再创建索引（A）就是冗余索引，因为这只是前一个索引的前缀索引，再创建（B，A）则不是冗余索引，索引（B）也不是。其他不同类型的索引也不会是B-Tree索引的冗余索引。</p>
<p><strong>冗余索引通常发生在为表添加新索引的时候。</strong>大多数情况，<strong>应该尽量扩展已有的索引而不是创建新索引。</strong>有时也需要冗余索引，扩展已有的索引会导致其变得太大。</p>
<h4 id="2-10-未使用的索引"><a href="#2-10-未使用的索引" class="headerlink" title="2.10 未使用的索引"></a><strong>2.10 未使用的索引</strong></h4><p>建议考虑删除。。。</p>
<h4 id="2-11-索引和锁"><a href="#2-11-索引和锁" class="headerlink" title="2.11 索引和锁"></a><strong>2.11 索引和锁</strong></h4><p><strong>索引可以让查询锁定更少的行。</strong></p>
<p>InnoDB只有在访问行的时候才会对其加锁，而索引能减少InnoDB访问的行数，从而减少锁的数量。但这只有当InnoDB在存储引擎层能够过滤掉所有不需要的行时才有效。</p>
<p>InnoDB在二级索引上使用共享（读）锁，但访问主键索引需要排他（写）锁。这消除了使用覆盖索引的可能性，并且使得SELECT FOR UPDATE比LOCK IN SHARE MODE或非锁定查询要慢得多。</p>

        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/MySQL/">MySQL</a>
                </div>
            </div>
        </div>
        
        
        
        <div class="social-share"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css">
<script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3>
        <div class="buttons is-centered">
            
                
<a class="button is-info donate">
    <span class="icon is-small">
        <i class="fab fa-alipay"></i>
    </span>
    <span>支付宝</span>
    <div class="qrcode"><img src="/images/alipay.jpg" alt="支付宝"></div>
</a>

                
        </div>
    </div>
</div>



<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/2019/09/08/Redis设计与实现（一）简单动态字符串/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">Redis设计与实现（一）简单动态字符串（SDS）</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2019/08/18/MySQL索引底层实现原理/">
                <span class="level-item">MySQL索引底层实现原理</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">评论</h3>
        
<div id="lv-container" data-id="city" data-uid="MTAyMC80NDEzMi8yMDY2Nw==">
    <script type="text/javascript">
        (function(d, s) {
            var j, e = d.getElementsByTagName(s)[0];

            if (typeof LivereTower === 'function') { return; }

            j = d.createElement(s);
            j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
            j.async = true;

            e.parentNode.insertBefore(j, e);
        })(document, 'script');
    </script>
    <noscript> Please activate JavaScript for write a comment in LiveRe</noscript>
</div>

    </div>
</div>
</div>
                

<!-- 粘贴的部分 -->
                          <!-- 修改，可选保留的栏 -->




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-3 column-left is-sticky">
    
        
<div class="card widget" id="toc">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                目录
            </h3>
            <ul class="menu-list"><li>
        <a class="is-flex" href="#高性能的索引策略">
        <span class="has-mr-6">1</span>
        <span>高性能的索引策略</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#1、索引的优点">
        <span class="has-mr-6">1.1</span>
        <span>1、索引的优点</span>
        </a></li><li>
        <a class="is-flex" href="#2、高性能的索引策略">
        <span class="has-mr-6">1.2</span>
        <span>2、高性能的索引策略</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#2-1-独立的列">
        <span class="has-mr-6">1.2.1</span>
        <span>2.1 独立的列</span>
        </a></li><li>
        <a class="is-flex" href="#2-2-前缀索引和索引选择性">
        <span class="has-mr-6">1.2.2</span>
        <span>2.2 前缀索引和索引选择性</span>
        </a></li><li>
        <a class="is-flex" href="#2-3-多列索引">
        <span class="has-mr-6">1.2.3</span>
        <span>2.3 多列索引</span>
        </a></li><li>
        <a class="is-flex" href="#2-4-选择合适的索引列顺序">
        <span class="has-mr-6">1.2.4</span>
        <span>2.4 选择合适的索引列顺序</span>
        </a></li><li>
        <a class="is-flex" href="#2-5-聚簇索引">
        <span class="has-mr-6">1.2.5</span>
        <span>2.5 聚簇索引</span>
        </a></li><li>
        <a class="is-flex" href="#2-6-覆盖索引">
        <span class="has-mr-6">1.2.6</span>
        <span>2.6 覆盖索引</span>
        </a></li><li>
        <a class="is-flex" href="#2-7-使用索引扫描来做排序">
        <span class="has-mr-6">1.2.7</span>
        <span>2.7 使用索引扫描来做排序</span>
        </a></li><li>
        <a class="is-flex" href="#2-8-压缩（前缀压缩）索引">
        <span class="has-mr-6">1.2.8</span>
        <span>2.8 压缩（前缀压缩）索引</span>
        </a></li><li>
        <a class="is-flex" href="#2-9-冗余和重复索引">
        <span class="has-mr-6">1.2.9</span>
        <span>2.9 冗余和重复索引</span>
        </a></li><li>
        <a class="is-flex" href="#2-10-未使用的索引">
        <span class="has-mr-6">1.2.10</span>
        <span>2.10 未使用的索引</span>
        </a></li><li>
        <a class="is-flex" href="#2-11-索引和锁">
        <span class="has-mr-6">1.2.11</span>
        <span>2.11 索引和锁</span>
        </a></li></ul></li></ul></li></ul>
        </div>
    </div>
</div>

    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <img class="image is-128x128 has-mb-6" src="/images/头像.png" alt="冯泡泡">
                    
                    
                    <p class="is-size-4 is-block">
                        冯泡泡
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        快乐地撸撸代码，安静地品品生活
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>China,Chengdu</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <p class="title has-text-weight-normal">
                        26
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <p class="title has-text-weight-normal">
                        4
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <p class="title has-text-weight-normal">
                        5
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/EdwardFeng1995" target="_blank">
                关注我</a>
        </div>
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Github" href="https://github.com/EdwardFeng1995">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Facebook" href="https://facebook.com">
                
                <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Twitter" href="https://twitter.com">
                
                <i class="fab fa-twitter"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Dribbble" href="https://dribbble.com">
                
                <i class="fab fa-dribbble"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/C-心得/">
            <span class="level-start">
                <span class="level-item">C++心得</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Linux/">
            <span class="level-start">
                <span class="level-item">Linux</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">19</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/数据库/">
            <span class="level-start">
                <span class="level-item">数据库</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/计算机网络/">
            <span class="level-start">
                <span class="level-item">计算机网络</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/MySQL/" style="font-size: 13.33px;">MySQL</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/操作系统/" style="font-size: 16.67px;">操作系统</a> <a href="/tags/网络编程/" style="font-size: 20px;">网络编程</a>
    </div>
</div>

    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            链接
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://hexo.io" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Hexo</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">hexo.io</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/ppoffice" target="_blank">
                    <span class="level-left">
                        <span class="level-item">PPOffice</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
    
        <div class="column-right-shadow is-hidden-widescreen is-sticky">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/2019/09/08/Redis设计与实现（一）简单动态字符串/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/redis.jpeg" alt="Redis设计与实现（一）简单动态字符串（SDS）">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-09-08T12:05:00.000Z">2019-09-08</time></div>
                    <a href="/2019/09/08/Redis设计与实现（一）简单动态字符串/" class="has-link-black-ter is-size-6">Redis设计与实现（一）简单动态字符串（SDS）</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/数据库/">数据库</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/08/22/MySQL高性能的索引策略/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/数据库.jpeg" alt="MySQL高性能的索引策略">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-22T08:23:00.000Z">2019-08-22</time></div>
                    <a href="/2019/08/22/MySQL高性能的索引策略/" class="has-link-black-ter is-size-6">MySQL高性能的索引策略</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/数据库/">数据库</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/08/18/MySQL索引底层实现原理/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/MySQL索引.png" alt="MySQL索引底层实现原理">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-18T07:39:00.000Z">2019-08-18</time></div>
                    <a href="/2019/08/18/MySQL索引底层实现原理/" class="has-link-black-ter is-size-6">MySQL索引底层实现原理</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/数据库/">数据库</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/07/12/《现代操作系统》学习笔记-7-内存管理/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="《现代操作系统》学习笔记(7)--内存管理">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-07-12T08:32:00.000Z">2019-07-12</time></div>
                    <a href="/2019/07/12/《现代操作系统》学习笔记-7-内存管理/" class="has-link-black-ter is-size-6">《现代操作系统》学习笔记(7)--内存管理</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Linux/">Linux</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/06/25/计算机网络-http协议/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="计算机网络--http协议">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-06-25T12:00:00.000Z">2019-06-25</time></div>
                    <a href="/2019/06/25/计算机网络-http协议/" class="has-link-black-ter is-size-6">计算机网络--http协议</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/计算机网络/">计算机网络</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">九月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">八月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">七月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/06/">
                <span class="level-start">
                    <span class="level-item">六月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/05/">
                <span class="level-start">
                    <span class="level-item">五月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">四月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">三月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MySQL/">
                        <span class="tag">MySQL</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Redis/">
                        <span class="tag">Redis</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/http/">
                        <span class="tag">http</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/操作系统/">
                        <span class="tag">操作系统</span>
                        <span class="tag is-grey">7</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/网络编程/">
                        <span class="tag">网络编程</span>
                        <span class="tag is-grey">12</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>


                

<!-- 粘贴的部分 -->


            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/冯泡泡.png" alt="MySQL高性能的索引策略" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 冯泡泡&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<div align="center">
<span id="busuanzi_container_site_pv">
    &nbsp;&nbsp;&#10052;&nbsp;&nbsp;访问量：<span id="busuanzi_value_site_pv"></span>
</span>

<span id="busuanzi_container_site_uv">
  &nbsp;&nbsp;&#10052;&nbsp;&nbsp;访客数：<span id="busuanzi_value_site_uv"></span>
</span>

<br>
	
	<span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
            <script>
                var now = new Date(); 
                function createtime() { 
                    var grt= new Date("3/1/2019 12:00:00");//此处修改你的建站时间或者网站上线时间 
                    now.setTime(now.getTime()+250); 
                    days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
                    hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
                    if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
                    mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
                    seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
                    snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
                    document.getElementById("timeDate").innerHTML = "Security Run For "+dnum+" 天 "; 
                    document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
                } 
            setInterval("createtime()",250);
</script>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

</div></footer>


    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    

    <!-- 雪花特效 -->
    <script type="text/javascript">
      var windowWidth = $(window).width();
      if (windowWidth > 480) {
        document.write('<script type="text/javascript" src="/js/src/snow.js"><\/script>');
      }
    </script>

</body>
</html>
